<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playalong</title>
    <link rel="icon" type="image/x-icon" href="/src/img/MCL_logo.png" />

    <link
      rel="stylesheet"
      href="node_modules/@fortawesome/fontawesome-free/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="node_modules/bootstrap/dist/css/bootstrap.min.css"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/src/styles/main.css" />

    <!-- <script
      type="module"
      src="node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"
    ></script> -->

    <!-- <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script> -->

    <link
      rel="stylesheet"
      href="/vendor/bootstrap-treeview/bootstrap-treeview.min.css"
    />
    <script
      defer
      src="/vendor/bootstrap-treeview/bootstrap-treeview.min.js"
    ></script>

    <script type="module" src="/src/js/nexus-export.js"></script>
    <script type="module" src="/src/js/audio-player.js" defer></script>

    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
    <link rel="stylesheet" href="/styles/custom.css" />

    <script src="/styles/bootstrap-4.6/jquery-3.5.1.min.js"></script>
    <script src="/styles/bootstrap-4.6/bootstrap.bundle.min.js"></script>
    <script src="/styles/bootstrap-4.6/jquery-resizable.min.js"></script>
    <!-- <link rel="stylesheet" href="./styles/main.css" /> -->
    <!-- <link
      rel="stylesheet"
      href="./styles/midiplayer.css"
    /> -->
    <!-- <link rel="stylesheet" href="./styles/collab.css" />
    <link
      rel="stylesheet"
      href="./styles/chord-player.css"
    />
    <link href="./styles/all.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="./styles/fontawesome/font-awesome.min.css"
    /> -->
    <link rel="stylesheet" href="./styles/jitsi.css" />

    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <script type="module" src="src/js/playalong/collab/setup.js"></script>

    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
    <!-- âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ -->
  </head>
  <body>
    <img
      id="musicolab-logo"
      src="/src/img/MCL_fullLogo.png"
      alt="MusiColab Logo"
    />

    <!-- <h1 id="heading">ChordFinder</h1> -->

    <!-- METRONOME IS HERE âš¡âš¡âš¡âš¡ -->
    <!-- workbench initialises audio manager -->
    <script type="text/javascript" src="/js/audioManager.js"></script>
    <!-- workbench also needs to initialise audio sources -->
    <script type="text/javascript" src="/js/audioSources.js"></script>
    <!-- workbench loads metronome -->

    <script
      type="module"
      src="/src/js/playalong/metronome_js/metronome.js"
    ></script>
    <script type="text/javascript" src="/js/main.js" defer></script>

    <!-- freeze-interface modal
    <div
      class="modal"
      id="freeze-interface"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content bg-transparent border-0">
          <div
            class="modal-body d-flex flex-column justify-content-center align-items-center"
          >
            <div
              class="alert alert-info notification-container text-center"
              role="alert"
            ></div>
            <div
              class="spinner-border text-light"
              style="width: 3rem; height: 3rem"
              role="status"
            >
              <span class="sr-only"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    -->

    <!-- Accept Jitsi meeting room name modal-->
    <div class="modal" id="enter-jitsi-meet-room" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header" id="meet-room-modal-header">
            <h5 class="modal-title">Join call</h5>
            <div id="room-info-container" class="ml-1">
              <a
                tabindex="0"
                id="meet-room-info"
                role="button"
                data-toggle="popover"
                data-container="#room-info-container"
                data-trigger="focus"
                data-html="true"
                data-content="Enter the room name for Jitsi. For example: <strong>My-meeting-room</strong>"
                data-placement="right"
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-info-circle"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                  />
                  <path
                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"
                  />
                </svg>
              </a>
            </div>

            <button class="close" type="button" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <center>
              <form
                id="meet-room-form"
                class="d-flex flex-column align-items-center form"
              >
                <div class="form-group">
                  <label for="meet-room" class="label">
                    <span>Jitsi meeting room:</span>
                  </label>
                  <input
                    class="form-control"
                    type="text"
                    name="meet-room"
                    id="meet-room"
                    required
                    minlength="5"
                    style="text-align: center"
                  />
                </div>
                <div class="form-group d-flex justify-content-end">
                  <!---
                  <button
                    type="button"
                    class="btn btn-danger"
                    id="btnCloseCallJoin"
                    data-dismiss="modal"
                  >
                    Close
                  </button>
                  --->
                  <button
                    id="join_call"
                    type="submit"
                    class="btn btn-success ml-1"
                  >
                    <div class="d-flex align-items-center">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="#f9f9f9"
                        class="bi bi-telephone-fill"
                        viewBox="0 0 16 16"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"
                        />
                      </svg>
                      <span class="ml-1">Join Call</span>
                    </div>
                  </button>
                  <button
                    id="join_call_video_only"
                    type="submit"
                    class="btn btn-success ml-1"
                  >
                    <div class="d-flex align-items-center">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="#f9f9f9"
                        class="bi bi-telephone-fill"
                        viewBox="0 0 16 16"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"
                        />
                      </svg>
                      <span class="ml-1">Video Only </span>
                    </div>
                  </button>
                </div>
              </form>
            </center>
          </div>
        </div>
      </div>
    </div>

    <div id="jitsi-meeting-container">
      <!--Here will appear jitsi Iframe upon request-->
    </div>

    <div class="modal" tabindex="-1" id="repository-files-modal">
      <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Repository tracks</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body mb-3 overflow-auto">
            <div class="container-fluid" id="repository-tracks-container">
              <div class="row">
                <div class="col-sm-4">
                  <form id="repository-file-search" class="flex-column">
                    <div class="form-group">
                      <label for="input-search" class="sr-only"
                        >Search Tree:</label
                      >
                      <input
                        type="input"
                        class="form-control"
                        id="input-search"
                        placeholder="Type to search..."
                        value=""
                      />
                    </div>
                    <div class="d-flex form-group justify-content-start w-100">
                      <button
                        disabled
                        type="submit"
                        class="btn btn-success"
                        id="btn-search"
                      >
                        Search
                      </button>
                      <button
                        type="button"
                        class="btn btn-default"
                        id="btn-clear-search"
                      >
                        Clear
                      </button>
                    </div>
                  </form>
                </div>
                <div class="col-sm-8">
                  <div id="tree"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer justify-content-between border-0">
            <div class="ml-auto">
              <button
                id="cancel-request-btn"
                type="button"
                class="btn btn-outline-danger"
                disabled
              >
                Cancel
              </button>

              <button
                class="btn btn-primary hidden"
                disabled
                id="loading-file-btn"
              >
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                ></span
                >Loading...
              </button>

              <button
                class="btn btn-primary"
                form="repository-tracks-select"
                disabled
                id="load-file-btn"
              >
                Load File
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <center>
      <h3>
        <font>Play along</font>
        <font color="red"> (use headphones while recording)</font>
      </h3>
      <div hidden id="waveform_mic">
        <!--Here will appear microphone input animation when recording-->
      </div>
      <div id="controls">
        <button id="start-close-call-btn" class="btn btn-lg">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="27"
            height="27"
            fill="currentColor"
            class="bi bi-telephone-fill"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"
            />
          </svg>
        </button>
        <button id="recordButton" class="btn btn-lg" title="Start recording">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="45"
            height="45"
            fill="red"
            class="bi bi-record-fill"
            viewBox="0 0 16 16"
          >
            <path fill-rule="evenodd" d="M8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10z" />
          </svg>
        </button>
        <button hidden id="pauseButton" class="btn btn-lg">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="45"
            height="45"
            fill="currentColor"
            class="bi bi-pause-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"
            />
          </svg>
        </button>
        <button id="stopButton" hidden class="btn btn-lg" title="">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="45"
            height="45"
            fill="currentColor"
            class="bi bi-stop-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"
            />
          </svg>
        </button>
        <button id="playpauseallButton" hidden class="btn btn-lg" title="">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="45"
            height="45"
            fill="currentColor"
            class="bi bi-stop-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"
            />
          </svg>
        </button>
        <button id="playallButton" hidden class="btn btn-lg" title=""></button>
        <button id="pauseallButton" hidden class="btn btn-lg" title=""></button>
        <button id="stopallButton" hidden class="btn btn-lg" title="Stop all">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="45"
            height="45"
            fill="black"
            class="bi bi-skip-start-fill"
            viewBox="0 0 16 16"
          >
            <path
              d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z"
            />
          </svg>
        </button>

        <button
          id="combineselectedButton"
          hidden
          class="btn btn-lg"
          title="Mix recordings and download"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="25"
            height="25"
            fill="currentColor"
            class="bi bi-download"
            viewBox="0 0 16 16"
          >
            <path
              d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"
            />
            <path
              d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"
            />
          </svg>
        </button>

        <button id="metronome-btn" class="no-border">
          <svg
            version="1.1"
            id="metronome-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="35"
            height="35"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 32 32"
            xml:space="preserve"
          >
            <style type="text/css">
              .st0 {
                fill: none;
                stroke: #000000;
                stroke-width: 2;
                stroke-linejoin: round;
                stroke-miterlimit: 10;
              }
              .st1 {
                fill: none;
                stroke: #000000;
                stroke-width: 2;
                stroke-linecap: round;
                stroke-linejoin: round;
                stroke-miterlimit: 10;
              }
            </style>
            <line class="st1" x1="16" y1="20" x2="29" y2="3" />
            <line class="st1" x1="15" y1="7" x2="17" y2="7" />
            <line class="st1" x1="15" y1="10" x2="17" y2="10" />
            <line class="st1" x1="15" y1="13" x2="17" y2="13" />
            <path
              class="st1"
              d="M22.7,16l2.5,9.7c0.4,1.7-0.8,3.3-2.6,3.3H9.3c-1.7,0-3-1.6-2.6-3.2l4.7-20.5C11.8,3.9,13,3,14.3,3h3.4c1.4,0,2.5,1,2.8,2.3l1.4,7"
            />
            <line class="st1" x1="7.4" y1="23" x2="24" y2="23" />
          </svg>
          <div
            class="dropdown-menu"
            id="metronomeSettingsModal"
            aria-labelledby="metronome-settings-menu"
          >
            <h5 class="dropdown-header">Metronome Settings</h5>

            <div id="tempo-menu" class="menu-option">
              <label class="label-option"><strong>Tempo</strong></label>
              <div class="inputs">
                <div id="bpmInput" class="input-container">
                  <div class="input-field">
                    <span class="prev"></span>
                    <span class="box" contenteditable="true">0</span>
                    <span class="next"></span>
                  </div>
                  <label for="bpmInput" class="input-label">BPM (30-300)</label>
                </div>

                <div id="tempoVolumeInput" class="input-container">
                  <div>
                    <span id="dial"></span>
                    <span id="number-box"></span>
                  </div>
                  <label for="tempoVolumeInput" class="input-label"
                    >Volume</label
                  >
                </div>
              </div>
            </div>

            <div class="menu-separator"></div>

            <div class="menu-option">
              <label class="label-option"><strong>Rhythm</strong></label>
              <div class="inputs">
                <div class="input-container">
                  <div class="input-list">
                    <select
                      id="TSNumerator"
                      style="width: 35px"
                      class="no-border"
                    >
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                    </select>
                    <span style="padding-right: 3px; padding-left: 3px">
                      /
                    </span>
                    <select
                      id="TSDenominator"
                      style="width: 40px; padding-right: 10px"
                      class="no-border"
                    >
                      <option value="4">4</option>
                      <option value="8">8</option>
                    </select>
                  </div>
                  <label class="input-label">Time Signature</label>
                </div>

                <div class="input-container">
                  <div class="input-list">
                    <select
                      id="resolution"
                      style="width: 80px; padding-left: 10px"
                      class="no-border"
                    >
                      <option value="4">4ths</option>
                      <option value="8">8ths</option>
                      <option value="16">16ths</option>
                    </select>
                  </div>
                  <label class="input-label">Resolution</label>
                </div>
              </div>
            </div>

            <div class="menu-separator"></div>

            <!-- Measure Selector and Metronome Toggle -->
            <div class="menu-option">
              <label class="label-option"><strong>Measures</strong></label>
              <div class="inputs">
                <div id="precountInput" class="input-container">
                  <div class="input-list">
                    <select id="precount" class="no-border">
                      <option value="0">0 measures</option>
                      <option value="1">1 measure</option>
                      <option selected value="2">2 measures</option>
                    </select>
                  </div>
                  <label for="precount">Pre-count</label>
                </div>
                <div id="count-on-off" class="input-container">
                  <div class="radios-container">
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="countOn">On</label>
                      <input
                        class="form-check-input"
                        type="radio"
                        id="countOn"
                        name="count-on-off"
                      />
                    </div>
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="countOff">Off</label>
                      <input
                        class="form-check-input"
                        type="radio"
                        id="countOff"
                        name="count-on-off"
                        checked
                      />
                    </div>
                  </div>
                  <label for="count-on-off">Continuous</label>
                </div>
              </div>
            </div>
          </div>
        </button>

        <div>
          <span
            id="playback_speed"
            style="padding-left: 30px; padding-right: 15px"
          >
            Playback speed:</span
          >
          <input
            id="speedSlider"
            type="range"
            min="10"
            max="200"
            step="10"
            value="100"
            class="slider"
            oninput="setSpeed(this.value)"
          />
          <span id="speedValue" style="padding-left: 10px"> 100% </span>
        </div>

        <div id="preCountModal" class="d-none"></div>
      </div>

      <!-- AUDIO PLAYER - A.K.A. BACKING TRACK CONTAINER -->
      <div id="audio-player-and-controls-container" class="d-none">
        <center>
          <div class="preface-audio-help">
            <div class="column1">
              Get started with your audio journey! Choose one of these simple
              ways to load your audio files:
            </div>
            <div class="column2">
              <ul>
                <li>
                  <strong>Drag and drop</strong> the file into the space below.
                </li>
                <li>
                  Create a recording using the <strong>Record</strong> button.
                </li>
              </ul>
            </div>
            <div class="column3">
              <ul>
                <li><strong>Import from disk</strong>. (Audio I/O)</li>
                <li><strong>Import from repository</strong>. (Audio I/O)</li>
              </ul>
            </div>
          </div>

          <div class="preface-annotation-bar d-none">
            <div id="preface-annotation" class="d-non">
              <div id="preface-annotation-help">
                <span>
                  Now execute chord analysis with the
                  <strong>Analyze</strong> button</span
                >
              </div>

              <button id="analyze-chords-btn">
                <i class="fa-solid fa-file-audio fa-xl"></i>
                <span class="control-labe">Analyze</span>
              </button>
            </div>

            <div id="analysis-loading-bar" class="loading-bar-container d-none">
              <div class="loading-bar-progress">
                <span class="loading-bar-progress-value"
                  >Processing <strong>1%</strong></span
                >
              </div>
            </div>

            <div id="audio-file-name-preface">---</div>
          </div>

          <!-- toolbar -->
          <div id="toolbar" class="d-none">
            <div id="left-toolbar-controls" class="toolbar-controls">
              <button id="toggle-SnapOnBeats-btn" class="no-border">
                <i
                  class="fa-solid fa-toggle-on fa-xl d-none"
                  style="color: #008000"
                ></i>
                <i class="fa-solid fa-toggle-off fa-xl"></i>
                <div class="control-label">Snap (beats)</div>
              </button>

              <button id="toggle-clickTrack-btn" class="no-border">
                <i
                  class="fa-solid fa-toggle-on fa-xl d-none"
                  style="color: #008000"
                ></i>
                <i class="fa-solid fa-toggle-off fa-xl"></i>
                <div class="control-label">Click Track</div>
              </button>
            </div>

            <div id="center-toolbar-controls" class="toolbar-controls">
              <select id="annotation-list" class="form-control-sm"></select>

              <button class="no-border no-padding" id="delete-annotation-btn">
                <i class="fa-solid fa-trash-can"></i>
                <div class="control-label no-padding">Delete</div>
              </button>

              <button id="toggle-edit-btn" class="no-border">
                <i
                  class="fa-solid fa-toggle-on fa-xl d-none"
                  style="color: #008000"
                ></i>
                <i class="fa-solid fa-toggle-off fa-xl"></i>
                <div class="control-label">Edit</div>
              </button>
            </div>

            <div
              id="right-toolbar-controls"
              class="toolbar-controls pointer-events-disabled"
            >
              <button class="btn-edit-mode disabled d-none" id="edit-chord-btn">
                <i class="fa-solid fa-pen fa-xl"></i>
                <div class="control-label">Edit chord</div>
              </button>
              <button
                class="btn-edit-mode disabled d-none"
                id="save-chords-btn"
              >
                <i class="fa-solid fa-floppy-disk fa-xl"></i>
                <div class="control-label">Save chords</div>
              </button>
              <button
                class="btn-edit-mode disabled d-none"
                id="cancel-editing-btn"
              >
                <i class="fa-solid fa-xmark fa-xl"></i>
                <div class="control-label">Cancel</div>
              </button>

              <div id="audio-file-name">---</div>
            </div>

            <div id="info-question">
              <i class="fa-solid fa-circle-question fa-xl"></i>
              <i class="fa-solid fa-circle-info fa-xl d-none"></i>
            </div>

            <button id="player-settings-btn" class="no-border">
              <img
                class="settings-icon"
                src="/src/img/settings_icon.png"
                alt="Settings"
              />

              <div class="dropdown-menu">
                <h5 class="dropdown-header">Player Settings</h5>

                <div id="follow-playback-menu" class="menu-option">
                  <label class="label-option" for="followPlayback"
                    ><strong>Follow Playback</strong></label
                  >
                  <div class="radios-container">
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="scroll"
                        >Scroll</label
                      >
                      <input
                        class="form-check-input"
                        type="radio"
                        id="scroll"
                        name="followPlayback"
                      />
                    </div>
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="pageTurn"
                        >Page Turn</label
                      >
                      <input
                        class="form-check-input"
                        type="radio"
                        id="pageTurn"
                        name="followPlayback"
                        checked
                      />
                    </div>
                  </div>
                  <div class="inputs">
                    <div id="firstInput" class="input-container">
                      <div class="input-field">
                        <span class="next"></span>
                        <span class="box">0</span>
                        <span class="prev"></span>
                      </div>
                      <label for="firstInput" class="input-label"
                        >Reset point</label
                      >
                    </div>

                    <div id="secondInput" class="input-container">
                      <div class="input-field">
                        <span class="next"></span>
                        <span class="box">0</span>
                        <span class="prev"></span>
                      </div>
                      <label for="secondInput" class="input-label"
                        >Turn point</label
                      >
                    </div>
                  </div>
                </div>

                <div class="menu-separator"></div>
                <div id="chord-categories-menu" class="menu-option form-group">
                  <label class="label-option" for="chordEditorCategories"
                    ><strong>Chord Editor Categories</strong></label
                  >
                  <div class="radios-container">
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="onChordCategories"
                        >On</label
                      >
                      <input
                        class="form-check-input"
                        type="radio"
                        id="onChordCategories"
                        name="chordEditorCategories"
                      />
                    </div>
                    <div class="form-check d-flex align-items-center">
                      <label class="form-check-label" for="offChordCategories"
                        >Off</label
                      >
                      <input
                        class="form-check-input"
                        type="radio"
                        id="offChordCategories"
                        name="chordEditorCategories"
                        checked
                      />
                    </div>
                  </div>
                </div>
              </div>
            </button>
          </div>

          <!-- settings ? -->

          <!-- audio player (3 parts: audio-container, audio-sidebar-controls, audio-sidebar-text) -->
          <div id="audio-player">
            <div id="audio-container">
              <div id="wavetimeline"></div>
              <div id="waveform">
                <!-- <div id="waveform" class="no-opacity"> -->
                <!-- <img
                    id="loading-spinner"
                  src="./src/img/loading_spinner.gif"
                  alt="Loading..."
                  class="d-none"
                  /> -->

                <div
                  id="waveform-loading-bar"
                  class="loading-bar-container no-opacity"
                >
                  <div class="loading-bar-progress">
                    <span class="loading-bar-progress-value"
                      >Processing <strong>1%</strong></span
                    >
                  </div>
                </div>

                <div class="drag-text">Drop the audio file here!</div>

                <div id="waveform-bpm" class="d-none">
                  BPM <span id="tempo-value"></span>
                </div>

                <div id="skip-forward" class="skip-cue">
                  <div class="skip-cue-arrows">
                    <i class="fa-solid fa-caret-right fa-xl"></i>
                    <i class="fa-solid fa-caret-right fa-xl"></i>
                    <i class="fa-solid fa-caret-right fa-xl"></i>
                  </div>
                  <div class="skip-cue-tooltip"></div>
                </div>
                <div id="skip-backward" class="skip-cue">
                  <div class="skip-cue-arrows">
                    <i class="fa-solid fa-caret-left fa-xl"></i>
                    <i class="fa-solid fa-caret-left fa-xl"></i>
                    <i class="fa-solid fa-caret-left fa-xl"></i>
                  </div>
                  <div class="skip-cue-tooltip"></div>
                </div>
              </div>

              <div class="player-controls disabled">
                <div id="left-player-controls">
                  <button
                    id="zoom-in-btn"
                    data-tooltip="Zoom in (+)"
                    class="no-border no-padding"
                  >
                    <i class="fa-solid fa-magnifying-glass-plus fa-xl"></i>
                    <div class="control-label no-padding">Zoom In</div>
                  </button>
                  <button
                    id="zoom-out-btn"
                    data-tooltip="Zoom out (-)"
                    class="no-border no-padding"
                  >
                    <i class="fa-solid fa-magnifying-glass-minus fa-xl"></i>
                    <div class="control-label no-padding">Zoom Out</div>
                  </button>
                  <button
                    id="time-ruler-btn"
                    data-tooltip="Change to <strong>bar:beat</strong> display (NOT READY!)"
                    class="no-border no-padding"
                  >
                    <div>
                      <span id="time-ruler-value">00:00.0</span>
                      <span id="audio-duration-value">/ 00:00.0</span>
                    </div>
                  </button>
                </div>
                <div id="center-player-controls">
                  <button
                    id="stop-btn"
                    data-tooltip="Stop (0)"
                    class="no-border"
                  >
                    <i class="fa-solid fa-backward-step fa-lg"></i>
                  </button>
                  <button
                    id="backward-btn"
                    data-tooltip="Backwards 2s (â†)"
                    class="no-border"
                  >
                    <i class="fa-solid fa-backward fa-lg"></i>
                  </button>
                  <button
                    id="play-pause-btn"
                    data-tooltip="Play (space)"
                    class="no-border"
                  >
                    <i
                      class="fa-solid fa-play fa-2xl"
                      style="color: #008000"
                    ></i>
                    <i class="fa-solid fa-pause fa-2xl d-none"></i>
                  </button>
                  <button
                    id="forward-btn"
                    data-tooltip="Forward 2s (â†’)"
                    class="no-border"
                  >
                    <i class="fa-solid fa-forward fa-lg"></i>
                  </button>
                  <button
                    id="repeat-btn"
                    data-tooltip="Enable loop (ð“)"
                    class="no-border"
                  >
                    <i class="fa-solid fa-repeat fa-lg"></i>
                  </button>
                </div>
                <div id="right-player-controls">
                  <button
                    id="follow-playback-btn"
                    class="no-padding no-opacity"
                  >
                    <span>Follow playback</span>
                  </button>
                  <button
                    id="mute-unmute-btn"
                    data-tooltip="Mute (m)"
                    class="no-border"
                  >
                    <i class="fa-solid fa-volume-xmark fa-lg d-none"></i>
                    <i class="fa-solid fa-volume-high fa-lg"></i>
                  </button>
                  <input
                    id="volume-slider"
                    class="no-border"
                    data-tooltip="Volume (â†‘) (â†“)"
                    type="range"
                    min="0"
                    max="1"
                    step="0.05"
                    value="1"
                  />
                </div>
              </div>
            </div>

            <!-- Sidebar -->
            <div id="audio-sidebar-controls" class="audio-sidebar">
              <button id="import-audio-btn" class="no-border">
                <!-- <i class="fa-solid fa-upload fa-xl"></i> -->
                <svg
                  width="30px"
                  height="30px"
                  viewBox="4 1 25 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H7C7.55228 23 8 22.5523 8 22C8 21.4477 7.55228 21 7 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V7C19 7.55228 19.4477 8 20 8C20.5523 8 21 7.55228 21 7V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12.5 24C13.8807 24 15 22.8807 15 21.5V12.8673L20 12.153V18.05C19.8384 18.0172 19.6712 18 19.5 18C18.1193 18 17 19.1193 17 20.5C17 21.8807 18.1193 23 19.5 23C20.8807 23 22 21.8807 22 20.5V11C22 10.7101 21.8742 10.4345 21.6552 10.2445C21.4362 10.0546 21.1456 9.96905 20.8586 10.0101L13.8586 11.0101C13.3659 11.0804 13 11.5023 13 12V19.05C12.8384 19.0172 12.6712 19 12.5 19C11.1193 19 10 20.1193 10 21.5C10 22.8807 11.1193 24 12.5 24Z"
                    fill="currentColor"
                  />
                </svg>
                <div class="control-label">Import from disk</div>
              </button>

              <button
                type="button"
                id="repository-input-button"
                class="no-border"
                data-toggle="modal"
                data-target="#repository-files-modal"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  fill="currentColor"
                  class="bi bi-database"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313ZM13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 5.698ZM14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13V4Zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A4.92 4.92 0 0 0 13 8.698Zm0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525Z"
                  />
                </svg>
                <div class="control-label">Import from repository</div>
              </button>

              <!-- id="download-jams-btn" -->
              <button
                id="export-to-disk-or-repository-btn"
                class="no-border disabled"
                type="button"
                data-toggle="modal"
                data-target="#exportToDiskRepository"
              >
                <i class="fa-solid fa-download fa-xl"></i>
                <div class="control-label">Export to disk or repository</div>
              </button>
            </div>

            <!-- Sidebar Text-->
            <div id="audio-sidebar-text" class="audio-sidebar">
              <span>Audio I/O Controls</span>
            </div>
          </div>
        </center>
      </div>

      <!--  -->
      <!--  -->
      <!--  -->

      <div
        class="modal fade"
        id="exportToDiskRepository"
        tabindex="-1"
        role="dialog"
        aria-labelledby="exportModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exportModalLabel">Export Options</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="menu-option">
                <label class="label-optiom"><strong>Include..</strong></label>

                <div id="btrack-yes-no" class="inputs">
                  <span>Backing track:</span>
                  <div class="input-container">
                    <div class="radios-container">
                      <div class="form-check d-flex align-items-center">
                        <label class="form-check-label" for="yes-btrack"
                          >Yes</label
                        >
                        <input
                          class="form-check-input"
                          type="radio"
                          id="yes-btrack"
                          name="btrack-yes-no"
                          checked
                        />
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <label class="form-check-label" for="no-btrack"
                          >No</label
                        >
                        <input
                          class="form-check-input"
                          type="radio"
                          id="no-btrack"
                          name="btrack-yes-no"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div id="annotation-yes-no" class="inputs disabled">
                  <span>Annotation file:</span>
                  <div class="input-container">
                    <div class="radios-container">
                      <div class="form-check d-flex align-items-center">
                        <label class="form-check-label" for="yes-annotation"
                          >Yes</label
                        >
                        <input
                          class="form-check-input"
                          type="radio"
                          id="yes-annotation"
                          name="annotation-yes-no"
                        />
                      </div>
                      <div class="form-check d-flex align-items-center">
                        <label class="form-check-label" for="no-annotation"
                          >No</label
                        >
                        <input
                          class="form-check-input"
                          type="radio"
                          id="no-annotation"
                          name="annotation-yes-no"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="menu-separator"></div>

              <div id="export-option">
                <label><strong>Export to:</strong></label>

                <div id="export-btns">
                  <button
                    type="button"
                    class="btn btn-primary export-musicolab"
                  >
                    MusiCoLab
                  </button>
                  <button type="button" class="btn btn-primary export-disk">
                    Disk
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="modal fade"
        id="confirmationModal"
        tabindex="-1"
        role="dialog"
      >
        <div class="modal-dialog" role="document">
          <div
            class="modal-content"
            style="background-color: rgb(250, 250, 249)"
          >
            <div class="modal-body">
              <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" id="confirmDelete">
                Yes
              </button>
              <button type="button" class="btn btn-secondary" id="cancelDelete">
                No
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="modalPrompt" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div
            class="modal-content"
            style="background-color: rgb(232, 228, 228)"
          >
            <div class="modal-header">
              <h5 class="modal-title">Save editing?</h5>
              <button
                id="closePrompt"
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p id="modalPromptMessage">abc</p>
              <form id="promptForm">
                <div class="form-group">
                  <div class="row">
                    <div class="col-sm-6">
                      <label for="annotatorName">Annotator Name:</label>
                      <input
                        type="text"
                        class="form-control"
                        id="annotatorName"
                        placeholder="Enter annotator name"
                      />
                    </div>
                    <div class="col-sm-6">
                      <label for="annotationDataSource"
                        >Annotation Data Source:</label
                      >
                      <select class="form-control" id="annotationDataSource">
                        <option value="user">User</option>
                        <option value="collaborative">Collaborative</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="annotationDescription"
                    >Annotation Description:</label
                  >
                  <textarea
                    class="form-control placeholder-text justified-text"
                    id="annotationDescription"
                    style="height: 10em; overflow-y: auto"
                    placeholder="Enter annotation description"
                  ></textarea>
                </div>
              </form>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="savePrompt">
                  Save
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  id="replacePrompt"
                >
                  Replace
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ -->
      <!-- ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ -->
      <!-- ðŸŽ¶ðŸŽ¶â—â—â—â—ðŸŽ¶ðŸŽ¶ -->
      <!-- ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ -->
      <!-- ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ðŸŽ¶ -->

      <div>
        <!-- <p></p>
        <div id="formats">Format: start recording to see sample rate</div> -->
        <p></p>
        <p hidden id="recordings_headline"><strong>Recordings:</strong></p>
        <p></p>
        <ol id="recordingsList"></ol>
      </div>
    </center>

    <div class="btn-group dropup users-online-container">
      <button
        type="button"
        class="btn btn-dark rounded-pill dropdown-toggle users-online-button"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 256 256"
          width="5vw"
          height="5vh"
        >
          <rect width="256" height="256" fill="none" />
          <circle
            cx="128"
            cy="140"
            r="40"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
          <path
            d="M196,116a59.8,59.8,0,0,1,48,24"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
          <path
            d="M12,140a59.8,59.8,0,0,1,48-24"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
          <path
            d="M70.4,216a64.1,64.1,0,0,1,115.2,0"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
          <path
            d="M60,116A32,32,0,1,1,91.4,78"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
          <path
            d="M164.6,78A32,32,0,1,1,196,116"
            fill="none"
            stroke="white"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="20"
          />
        </svg>
      </button>
      <div class="dropdown-menu" id="users-online"></div>
    </div>

    <!-- inserting these scripts at the end to be able to use all the elements in the DOM -->
    <!--<script src="js/metro.js"></script>-->

    <!--public scripts follow-->
    <script src="/js/soundtouch.js"></script>
    <script src="/js/recorder.js"></script>
    <script src="/js/wavesurfer.js"></script>
    <script src="/js/wavesurfer.cursor.js"></script>
    <script src="/js/wavesurfer.microphone.min.js"></script>
    <script src="/js/wavesurfer.timeline.js"></script>
    <script src="/js/file-load-repository.js"></script>
    <!-- application script -->
    <script src="/js/app.js"></script>
    <script src="/js/backing-track.js"></script>
    <!-- <script src='https://meet.jit.si/external_api.js'></script> -->
    <!-- <script src="https://jitsi-musicolab.hmu.gr:8443/external_api.js"></script> -->
    <script src="/vendor/jitsi/external_api.js"></script>
    <script src="/js/jitsi.js"></script>

    <script src="/js/metronome-settings.js" defer></script>

    <!-- END -->
  </body>
</html>
